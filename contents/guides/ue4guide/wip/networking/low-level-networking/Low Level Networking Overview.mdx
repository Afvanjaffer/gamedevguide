---
sortIndex: 1
---

# High Level Overview

<iframe src="//www.slideshare.net/slideshow/embed_code/key/rOZ78ABPJCoiRs" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>

[UE4 Networking](https://www.slideshare.net/JoeGraf1/ue4-networking)

Actor Relevancy: Trade CPU for network bandwidth

Reliable function replication:

- Function is guaranteed to be called
- Resent when an error is present
- Delayed when bandwidth is saturated

Unreliable function replication:

- Gets skipped if bandwidth is saturated
- Does not re-attempt if error occurs

UNetDriver: contains list of connections to Tick

- Server: N connections
- Client: 1 connection
- UNetConnection: Contains list of channels to replicate
  - UChannel: Logical construct to route data to proper object
    - Accessed by ChannelID, some have predefined ChannelIDs
    - UControlChannel: For handshake exchange/non-gameplay/processing object loading requests
    - UVoiceChannel: For Voice
    - UActorChannel: For replicating actors
      - Each replicated actor has a channel
      - Actors replicated by dynamically assigned channel ID

# Networking Classes

## Custom UNetDriver

Can create custom netdrivers

- Specified through ini

  ```ini
  [/Script/Engine.Engine]
  !NetDriverDefinitions=ClearArray
  +NetDriverDefinitions=(DefName="GameNetDriver",DriverClassName="/Script/BBR.BBNetDriver",DriverClassNameFallback="/Script/OnlineSubsystemUtils.IpNetDriver")
  +NetDriverDefinitions=(DefName="DemoNetDriver",DriverClassName="/Script/Engine.DemoNetDriver",DriverClassNameFallback="/Script/Engine.DemoNetDriver")
  ```

- PacketHandler created in

  ```cpp
  UNetDriver::InitConnectionlessHandler()
  ConnectionlessHandler->AddHandler(TEXT("Engine.EngineHandlerComponentFactory(StatelessConnectHandlerComponent)"), true);
  ```

- Good starter examples: `cpp>USteamNetDriver/UOculusNetDriver`

- `UDemoNetDriver` is a more fleshed out/advanced example

## Custom UNetConnection

Can create custom UNetConnection

- Specified through ini

  ```ini
  [/Script/OnlineSubsystemUtils.IpNetDriver]
  NetConnectionClassName="/Script/OnlineSubsystemUtils.IpConnection"
  ```

- PacketHandler created in

  ```cpp
  UNetConnection::InitHandler()
  Handler->AddHandler(TEXT("Engine.EngineHandlerComponentFactory(StatelessConnectHandlerComponent)"), true);
  ```

- These are great examples: `cpp>USteamNetConnection,UOculusNetConnection,UDemoNetConnection`

## Custom UNetChannel

Can create custom channels

- Specified through ini; can be customized per NetDriver

  ```ini
  [/Script/Engine.NetDriver]
  +ChannelDefinitions=(ChannelName=Control, ClassName=/Script/Engine.ControlChannel, StaticChannelIndex=0, bTickOnCreate=true, bServerOpen=false, bClientOpen=true, bInitialServer=false, bInitialClient=true)
  ```

- `SendBunch()` is the workhorse that preps stuff for sending

- `UVoiceChannel` is a great simple starting point

- `UActorChannel` is more fleshed out
  - ActorChannel manages the creation and lifetime of a replicated actor
  - FObjectReplicator: Does Actual replication of properties and RPCs (see DataReplication.h)
